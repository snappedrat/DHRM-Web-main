
<ng-template #content let-modal>
    <div class="modal-content-container">
    <div class="modal-header">
        <h4 class="modal-title">Add Department Details</h4>
        <button type="button" class="btn-close" aria-label="Close" (click)="reset()" (click)="modal.dismiss('Cross click')">X</button>
    </div>
  
        <br>
        <form [formGroup] = "form">
          <div class="row">
                <div class="col">
                    <label>Plant Name: </label><br>
                    <select class="input2" formControlName = "plant_name"><option value="">Choose an option</option>
                    <option style="z-index: 1100 !important;" *ngFor = "let i of plantname" [ngValue] = "i.plant_code">{{i.plant_name}}</option>
                </select>
                </div>
                <div class="col">
                    <label>Department Name: </label><br>
                    <input class="input2"  type = "text" formControlName = "dept_name">
                </div><br>
                <br>
                <div class="col">
                    <label>SAP Code: </label><br>
                    <input class="input2"  type = "text" formControlName = "sap_code">
                </div><br>
                <div class="col">
                    <label>Department Group: </label><br>
                    <input class="input2"  type = "text" formControlName = "dept_group">
                </div><br>
          
         
            </div><br>
           
        </form>
    </div>
    <div class="modal-footer">
        <button *ngIf="editing_flag==false"  type="button" class="btn btn-success btn-lg" (click)="save()" (click)="modal.close('Close click')" >Save</button>
        <button *ngIf="editing_flag==true" type="button" class="btn btn-success btn-lg" (click)="editSave()" (click)="modal.close('Close click')" >Save</button>
        <button type="button" class="btn btn-danger btn-lg" (click)="reset()" (click)="modal.close('Close click')">Close</button>
    </div>

</ng-template>
<div class="container"><br>
<div>
  <h1 id = "title1" >Department Master</h1>
  <hr style="border-block-color: orange" />
</div>
<div class="button">
  <button mat-fab color="primary" (click)="open(content)"  style="float: right" aria-label="Example icon button with a delete icon">
      <mat-icon>person_add</mat-icon>
  </button></div>
  <div class = "button1">
  <button mat-fab style="float: right" aria-label="Example icon button with a delete icon" (click)="exportexcel()">
      <mat-icon>download</mat-icon>
  </button></div>
<br><br><br>
<app-loader *ngIf="loader.isLoding | async;else show"></app-loader>
      <ng-template #show>
<div class = "table-wrapper">
  <table class="table table-bordered table-striped table-hover">
    <table id="table">
        <thead>
        <tr>
          <th
                     div class="text-center"
            >
               SNo
            <th
                     div class="text-center"
            >
               Plant Name
            </th>
            <th
                    class="text-center"
              
                   
            >
            Department Code
            <th
                     div class="text-center"
            >
                Department Name
            </th>
            <th
                    class="text-center"
              
                   
            >
                SAP Code
            </th>
            <th
                    class="text-center"
             
                    
            >
                Department Group
            </th>

            <th
                     div class="text-center"
                    >
                Action
            </th>
          </tr>
          </thead>
          <tbody >
              <tr *ngFor = "let i of department; let a = index">
                 <td>{{a+1}}</td>
                  <td>{{i.plant_name}}</td>
                  <td>{{i.dept_slno}}</td>
                  <td>{{i.dept_name}}</td>
                  <td>{{i.sap_code}}</td>
                  <td>{{i.dept_group}}</td>

                  <td>
                      <button mat-mini-fab color = 'accent' (click)= "edit(a, i.dept_slno)" (click)="opentoedit(content)">
                          <mat-icon>edit</mat-icon>
                      </button>
                      <button mat-mini-fab color="warn" type="button" (click)="delete(a, i.dept_slno)" >
                          <mat-icon>delete</mat-icon>
                      </button>
                  </td>
              </tr>
          </tbody>
      </table>
  </table>
</div>

      </ng-template>
</div>